{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Usuario\\\\Desktop\\\\trivia-online\\\\src\\\\components\\\\Board.jsx\",\n  _s = $RefreshSig$();\n// src/components/Board.jsx\nimport React, { useMemo, useState, useEffect, useRef } from \"react\";\nimport boardImg from \"../assets/board-magic.png\";\n\n// Ajustá los imports a los nombres reales de tus archivos de bicis\nimport bikeYellow from \"../assets/bikes/bike-yellow.png\";\nimport bikeRed from \"../assets/bikes/bike-red.png\";\nimport bikeBlue from \"../assets/bikes/bike-blue.png\";\nimport bikeGreen from \"../assets/bikes/bike-green.png\";\nimport bikeOrange from \"../assets/bikes/bike-orange.png\";\nimport bikePurple from \"../assets/bikes/bike-purple.png\";\n\n// Mapeo de color → sprite de bicicleta\n// IMPORTANTE: cambiá los HEX para que coincidan con los colores reales de tus jugadores\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst COLOR_TO_BIKE = {\n  \"#fbbc04\": bikeYellow,\n  // amarillo\n  \"#ea4335\": bikeRed,\n  // rojo\n  \"#4285f4\": bikeBlue,\n  // azul\n  \"#34a853\": bikeGreen,\n  // verde\n  \"#ff6d00\": bikeOrange,\n  // naranja\n  \"#aa00ff\": bikePurple // violeta\n};\n\n// Distancia al centro por ronda (en %)\nconst RADII = [40, 28, 16]; // 0: expectativas, 1: contribución, 2: desafíos\n\nfunction Board({\n  players,\n  currentRound,\n  currentPlayerId\n}) {\n  _s();\n  const [rotation, setRotation] = useState(0);\n  const totalSpinsRef = useRef(0);\n  const prevRoundRef = useRef(currentRound);\n\n  // Calcula posiciones radiales de las bicis (sin rotación de ruleta aún)\n  const positions = useMemo(() => {\n    const n = Math.max(players.length, 1);\n    const anglePerSlot = 2 * Math.PI / n;\n    return players.map((player, index) => {\n      var _player$maxRoundReach;\n      const stage = Math.max(0, Math.min(2, (_player$maxRoundReach = player.maxRoundReached) !== null && _player$maxRoundReach !== void 0 ? _player$maxRoundReach : 0)); // clamp 0..2\n\n      const radius = RADII[stage];\n\n      // Distribuimos a los jugadores alrededor del círculo.\n      // -Math.PI/2 = arriba (12 en punto)\n      const angle = -Math.PI / 2 + anglePerSlot * index;\n      const cx = 50;\n      const cy = 57; // un poquito más abajo por composición del tablero\n\n      const x = cx + radius * Math.cos(angle);\n      const y = cy + radius * Math.sin(angle);\n      return {\n        left: `${x}%`,\n        top: `${y}%`\n      };\n    });\n  }, [players]);\n\n  // Efecto de ruleta: gira cuando cambia el turno y más fuerte cuando cambia la ronda\n  useEffect(() => {\n    if (!players.length) return;\n    const activeIndex = players.findIndex(p => p.id === currentPlayerId);\n    if (activeIndex === -1) return;\n    const n = players.length;\n    const anglePerSlotDeg = 360 / n;\n    const wasRound = prevRoundRef.current;\n    const isRoundChange = currentRound !== wasRound;\n\n    // Giros extra: 1 por turno, 3 cuando cambia de ronda\n    const extraSpins = isRoundChange ? 3 : 1;\n    totalSpinsRef.current += extraSpins;\n\n    // Queremos que el jugador activo quede ARRIBA (12 en punto)\n    // Con la fórmula de arriba, el slot 0 ya está en 12,\n    // así que rotamos la ruleta -anglePerSlotDeg * activeIndex\n    const baseAngleForActive = -anglePerSlotDeg * activeIndex;\n    const newRotation = totalSpinsRef.current * 360 + baseAngleForActive;\n    setRotation(newRotation);\n    prevRoundRef.current = currentRound;\n  }, [players, currentPlayerId, currentRound]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"board-wrapper\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"board-frame\",\n      children: /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"board-wheel\",\n        style: {\n          transform: `rotate(${rotation}deg)`\n        },\n        children: [/*#__PURE__*/_jsxDEV(\"img\", {\n          src: boardImg,\n          alt: \"Tablero T\\xE1ndem\",\n          className: \"board-bg\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 104,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"board-effects\",\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            className: `board-glow board-glow--round-${currentRound}`\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 112,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board-particles board-particles--a\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 115,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"board-particles board-particles--b\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 116,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 111,\n          columnNumber: 11\n        }, this), players.map((player, index) => {\n          const bikeSrc = COLOR_TO_BIKE[player.color] || bikeYellow;\n          const isActive = player.id === currentPlayerId;\n          return /*#__PURE__*/_jsxDEV(\"img\", {\n            src: bikeSrc,\n            alt: `Bicicleta de ${player.name || \"Jugador\"}`,\n            className: \"bike-token\" + (isActive ? \" bike-token--active\" : \"\"),\n            style: positions[index]\n          }, player.id, false, {\n            fileName: _jsxFileName,\n            lineNumber: 126,\n            columnNumber: 15\n          }, this);\n        })]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 99,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n}\n_s(Board, \"nykOGMn7bbGVQlNlOvqMzZ/VQJI=\");\n_c = Board;\nexport default Board;\nvar _c;\n$RefreshReg$(_c, \"Board\");","map":{"version":3,"names":["React","useMemo","useState","useEffect","useRef","boardImg","bikeYellow","bikeRed","bikeBlue","bikeGreen","bikeOrange","bikePurple","jsxDEV","_jsxDEV","COLOR_TO_BIKE","RADII","Board","players","currentRound","currentPlayerId","_s","rotation","setRotation","totalSpinsRef","prevRoundRef","positions","n","Math","max","length","anglePerSlot","PI","map","player","index","_player$maxRoundReach","stage","min","maxRoundReached","radius","angle","cx","cy","x","cos","y","sin","left","top","activeIndex","findIndex","p","id","anglePerSlotDeg","wasRound","current","isRoundChange","extraSpins","baseAngleForActive","newRotation","className","children","style","transform","src","alt","fileName","_jsxFileName","lineNumber","columnNumber","bikeSrc","color","isActive","name","_c","$RefreshReg$"],"sources":["C:/Users/Usuario/Desktop/trivia-online/src/components/Board.jsx"],"sourcesContent":["// src/components/Board.jsx\r\nimport React, { useMemo, useState, useEffect, useRef } from \"react\";\r\nimport boardImg from \"../assets/board-magic.png\";\r\n\r\n// Ajustá los imports a los nombres reales de tus archivos de bicis\r\nimport bikeYellow from \"../assets/bikes/bike-yellow.png\";\r\nimport bikeRed from \"../assets/bikes/bike-red.png\";\r\nimport bikeBlue from \"../assets/bikes/bike-blue.png\";\r\nimport bikeGreen from \"../assets/bikes/bike-green.png\";\r\nimport bikeOrange from \"../assets/bikes/bike-orange.png\";\r\nimport bikePurple from \"../assets/bikes/bike-purple.png\";\r\n\r\n// Mapeo de color → sprite de bicicleta\r\n// IMPORTANTE: cambiá los HEX para que coincidan con los colores reales de tus jugadores\r\nconst COLOR_TO_BIKE = {\r\n  \"#fbbc04\": bikeYellow, // amarillo\r\n  \"#ea4335\": bikeRed,    // rojo\r\n  \"#4285f4\": bikeBlue,   // azul\r\n  \"#34a853\": bikeGreen,  // verde\r\n  \"#ff6d00\": bikeOrange, // naranja\r\n  \"#aa00ff\": bikePurple  // violeta\r\n};\r\n\r\n// Distancia al centro por ronda (en %)\r\nconst RADII = [40, 28, 16]; // 0: expectativas, 1: contribución, 2: desafíos\r\n\r\nfunction Board({ players, currentRound, currentPlayerId }) {\r\n  const [rotation, setRotation] = useState(0);\r\n\r\n  const totalSpinsRef = useRef(0);\r\n  const prevRoundRef = useRef(currentRound);\r\n\r\n  // Calcula posiciones radiales de las bicis (sin rotación de ruleta aún)\r\n  const positions = useMemo(() => {\r\n    const n = Math.max(players.length, 1);\r\n    const anglePerSlot = (2 * Math.PI) / n;\r\n\r\n    return players.map((player, index) => {\r\n      const stage = Math.max(\r\n        0,\r\n        Math.min(2, player.maxRoundReached ?? 0)\r\n      ); // clamp 0..2\r\n\r\n      const radius = RADII[stage];\r\n\r\n      // Distribuimos a los jugadores alrededor del círculo.\r\n      // -Math.PI/2 = arriba (12 en punto)\r\n      const angle = -Math.PI / 2 + anglePerSlot * index;\r\n\r\n      const cx = 50;\r\n      const cy = 57; // un poquito más abajo por composición del tablero\r\n\r\n      const x = cx + radius * Math.cos(angle);\r\n      const y = cy + radius * Math.sin(angle);\r\n\r\n      return {\r\n        left: `${x}%`,\r\n        top: `${y}%`\r\n      };\r\n    });\r\n  }, [players]);\r\n\r\n  // Efecto de ruleta: gira cuando cambia el turno y más fuerte cuando cambia la ronda\r\n  useEffect(() => {\r\n    if (!players.length) return;\r\n\r\n    const activeIndex = players.findIndex(\r\n      (p) => p.id === currentPlayerId\r\n    );\r\n\r\n    if (activeIndex === -1) return;\r\n\r\n    const n = players.length;\r\n    const anglePerSlotDeg = 360 / n;\r\n\r\n    const wasRound = prevRoundRef.current;\r\n    const isRoundChange = currentRound !== wasRound;\r\n\r\n    // Giros extra: 1 por turno, 3 cuando cambia de ronda\r\n    const extraSpins = isRoundChange ? 3 : 1;\r\n    totalSpinsRef.current += extraSpins;\r\n\r\n    // Queremos que el jugador activo quede ARRIBA (12 en punto)\r\n    // Con la fórmula de arriba, el slot 0 ya está en 12,\r\n    // así que rotamos la ruleta -anglePerSlotDeg * activeIndex\r\n    const baseAngleForActive = -anglePerSlotDeg * activeIndex;\r\n\r\n    const newRotation =\r\n      totalSpinsRef.current * 360 + baseAngleForActive;\r\n\r\n    setRotation(newRotation);\r\n\r\n    prevRoundRef.current = currentRound;\r\n  }, [players, currentPlayerId, currentRound]);\r\n\r\n  return (\r\n    <div className=\"board-wrapper\">\r\n      <div className=\"board-frame\">\r\n        <div\r\n          className=\"board-wheel\"\r\n          style={{ transform: `rotate(${rotation}deg)` }}\r\n        >\r\n          {/* Fondo del tablero */}\r\n          <img\r\n            src={boardImg}\r\n            alt=\"Tablero Tándem\"\r\n            className=\"board-bg\"\r\n          />\r\n\r\n          {/* Capa de efectos mágicos */}\r\n          <div className=\"board-effects\">\r\n            <div\r\n              className={`board-glow board-glow--round-${currentRound}`}\r\n            />\r\n            <div className=\"board-particles board-particles--a\" />\r\n            <div className=\"board-particles board-particles--b\" />\r\n          </div>\r\n\r\n          {/* Bicicletas (giran junto con el tablero) */}\r\n          {players.map((player, index) => {\r\n            const bikeSrc =\r\n              COLOR_TO_BIKE[player.color] || bikeYellow;\r\n            const isActive = player.id === currentPlayerId;\r\n\r\n            return (\r\n              <img\r\n                key={player.id}\r\n                src={bikeSrc}\r\n                alt={`Bicicleta de ${player.name || \"Jugador\"}`}\r\n                className={\r\n                  \"bike-token\" +\r\n                  (isActive ? \" bike-token--active\" : \"\")\r\n                }\r\n                style={positions[index]}\r\n              />\r\n            );\r\n          })}\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nexport default Board;\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}